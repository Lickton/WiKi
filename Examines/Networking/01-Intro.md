# 01 计算机网络概论

## 1 网络硬件

- 点对点：链路将一对单独的机器连接起来
- 分组/包：在一个点到点链路组成的网络中，为了从源端到达接收方，短消息必须首先访问一个或多个中间机器，这种短消息在某些情况下成为数据包或包
- 单播：点-点传输只有一个发送方和一个接收方
- 广播：广播系统中存在将一个数据包发送给所有目标机器，网络中每一台机器都会接收该发送数据包的格式称为广播
- 组播：有些广播系统还支持给一组机器发送数据包的模式，称为组播
- 以太网：许多有线局域网的拓扑结构是以点到点链路为基础的
- 交换机：通过一条点到点链路连接到的一个机器，成为交换机
- 个域网（PAN）：允许设备围绕着一个人进行通信
- 局域网（LAN）：是一种私有网络，一般在一座建筑内或建筑附近
- 城域网（MAN）：范围可以覆盖一个城市
- 广域网（WAN）：范围很大，可以跨越很大的地理区域，如一个国家、地区或一个大陆
- 通信子网/子网：网络中连接主机的网络其余部分。作用是将信息从一个主机携带到另一个主机
    - 传输线路：负责在机器之间移动比特。可以是铜线、光纤、无线链路
    - 交换元素：或称交换机，负责连接两条或以上传输线路的专用计算机
    - 路由器：数据到达一条入境线路时，交换元素必须选择一条出境线路把数据转发出去
        - 路由算法：使用网络中哪条多条路径中哪一条的策略
        - 转发算法：每个路由器如何决定把一个数据包发送到哪个位置的策略
- ISP：服务提供商，子网经营者

## 2 网络软件

- 层次栈/分级栈：栈中每一层的目的是向上层提供特定的服务，把如何实现这些服务的细节对上一层屏蔽；某种意义上来说，每一层都是一个虚拟机，它向上一层提供特定的服务
- 协议：通信双方就如何进行通信的一种约定
- 对等题：peer，不同机器上构成相应层次的实体
- 物理介质：进行实际通信的介质
- 接口：每一对相邻层次之间的是接口。定义了下层向上层提供哪些原语操作和服务。
- 网络体系结构：层和协议的集合
- 协议栈：一个特定的系统所使用的一组协议，即每一层一个协议
- 检错：从接收到的信息中发现错误所用的一种机制
- 寻址：在下层中，对特定的消息使用该机制标识发送方和接收方
- 命名：在上层中，对特定的消息使用该机制标识发送方和接收方
- 可扩展的：网络规模变大时仍能工作良好的设计
- 统计复用：许多网络设计根据主机的短期变化动态共享网络带宽，而不是每个主机分配可能用也可能不会用的固定比例带宽。即根据统计需求来共享带宽
- 流量控制：如何保持快速发送方不会用数据把慢速接收方淹没。经常使用从接收方到发送方的反馈机制
- 拥塞：网络超载，因为太多的计算机要发送太多流量，而网络又没有能力传递所有的数据包
- 面向连接的服务：按照电话系统建模，服务用户首先必须建立一个连接，然后使用该连接传输数据，最后释放该连接
    - 协商：发送方、接收方和子网一起协商一组将要使用的参数，如最大的消息长度、所要求的服务质量
    - 电路：与资源关联的连接的另一个名字，如具有固定的带宽
    -  可靠的面向连接的服务：接收方向发送方确认收到的每个报文，因而发送方可以据此保证报文已经到达接收方。确认本身引入额外的开销或延迟，通常是值得的
        - 报文序列：报文的边界始终得以保持
        - 字节流：该连接只是一个字节流，没有任何报文边界
- 无连接服务：按照邮政系统建模。每个报文都携带了完整的目标地址
    - 报文：在不同上下文中有不同的称呼
    - 数据包/包：网络层的报文
    - 存储-转发交换：中间节点只能在收到报文的全部内容之后再将该报文发送给下一个节点
    - 直通式交换：报文还没有被全部接收完毕之前就向下一个节点传输
    - 不可靠的无连接服务：通常成为数据包服务
        - 有确认的数据包服务：需要这种无需建立连接就可以发送一个报文的便利性
        - 请求-应答服务：发送方传输一个包含了某个请求的数据包；接收方以一个包含了请求结果的应答数据报作为反馈，通常在客户机-服务器模型中
- 原语：一个服务由一组原语正式说明，用户进程通过这些原语（操作）来访问该服务

## 3 参考模型

- OSI 模型：涉及如何连接开放的系统，有7层
    - 物理层：关注一条通信信道上传输原始比特
    - 数据链路层：将一个原始的传输设施转变成为一条没有漏检传输错误的线路。将真实的错误掩盖起来，使得网络层看不到
        - 数据帧：发送方将输入的数据拆分成为数据帧，数据链路层将其顺序发送
        - 确认帧：若服务是可靠的，则接收方必须确认正确收到的每一帧
        - 流量控制：避免快速发送方淹没一个慢速接收方
        - 介质控制子层：控制对共享信道的访问，通常在广播式的数据链路层存在的该问题
    - 网络层：控制子网的运行。一个关键的设计是如何将数据包从源端路由到接收方（广播式网络中路由问题比较简单，该层比较单薄）
        - 路由：可以建立在静态表的基础上
        - 拥塞控制：一般需要和高层协议结合起来综合处理拥塞才有效，高层协议必须适应它们注入网络的负载
    - 传输层：接收来自上一层的数据，在必要的时候把这些数据分割为较小的单元，然后把这些数据单元传递给网络层，并确保这些数据单元正确送达另一端
    - 会话层：允许不同机器上的用户建立会话
        - 对话控制：记录谁来传递数据
        - 令牌管理：禁止双方同时执行同一个关键操作
        - 同步功能：在长传输中设置一些端点，以便在系统崩溃之后还能恢复到崩溃前的状态继续运行
    - 表示层：关注所传递信息的语法和语义
    - 应用层：包含用户通常需要的各种各样的协议
        - HTTP：超文本传输协议
- TCP/IP 参考模型：需求导致本参考模型选择了数据包交换网络
    - 链路层：描述链路必须完成什么功能才能满足无连接的互联网络层的需求，如串行线和经典以太网链路，不是真正意义上的一个层，而是主机与传输线路之间的一个接口
    - 网络层：将整个网络体系结构贯穿在一起的关键层。改层的任务允许主机将数据包注入到任何网络，并且让数据包独立的到达接收方
        - 因特网协议（IP）：网络层定义了官方的数据包格式和协议
        - 因特网控制报文协议（ICMP）：辅助协议
    - 传输层：设计目标是允许源主机和目标主机上的对等实体进行对话
        - 控制传输协议（TCP）：可靠的、面向连接的协议，允许从一台机器发出的字节流正确无误地交付到互联网的另一台机器
            - 把输入的字节流分割成离散的报文，并把每个报文传递给网络层
            - 还负责流量控制
        - 用户数据报协议（UDP）：不可靠的、无连接协议，适用于不需要 TCP 的有序性或流量控制功能
    - 应用层：包含了所有高层协议
        - 虚拟终端协议（TELENET）
        - 文件传输协议（FTP）
        - 电子邮件协议（SMTP）
        - 域名系统（DNS）
        - HTTP
        - RTP
- OSI 模型与 TCP/IP 参考模型的比较
    - 服务、接口和协议
        - OSI 模型明确区分了这三个概念，每层用到的对等协议是本层自己内部的事情
            - 数据链路层最初只处理点到点网络。当广播式网络出现后，必须在模型中嵌入一个新的子层
        - TCP/IP 没有明确区分这三个概念
            - 网络层中提供真正服务的只有 IP 数据包和接收 IP 数据包
    - 无连接和面向连接的通信领域
        - OSI 模型的网络层同时支撑无连接和面向连接的通信，而传输层只支持面向连接的服务
        - TCP/IP 模型在网络层只支持一种无连接模式，但传输层同时支持两种模式
